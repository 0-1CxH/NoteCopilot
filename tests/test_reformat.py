from src.stream_reformat import StreamReformatter

if __name__ == "__main__":
    print(list(StreamReformatter.execute(
        ["ssss",  "ssss<",  "ssss<", "th", "ink", ">ppppp", "<", "ssss", "<", "</t", "hink", ">aaaaa"]
    )))
    print(list(StreamReformatter.execute(
        ["<", "th", "ink", ">ppppp", "<", "ssss", "<", "</t", "hink", ">aaaaa"]
    )))

    print(list(StreamReformatter.execute(
        ['<think>', '\n我们', '正在', '总结', '一份', '关于差', '旅预订', '系统中', '各类', '限制和', '关键', '概念', '的结构', '化内容', '。总结', '需要简洁', '但', '涵盖所有', '核心', '点。\n', ' 内容', '分为', '多个', '部分：', '订购项目', '、限制', '类型（', '显式和', '隐式', '）、关键', '事件、', '默认规则', '、清晰', '度分类', '和', '异常情况', '。\n', ' 我们将', '按逻辑', '顺序组织', '这些概念', '，避免', '冗余', '。\n\n', ' 核心', '结构', '：\n ', '1.', ' 订购', '项目：', '机票、', '酒店订单', '、火车', '票。\n', ' 2', '. ', '限制类型', '：时间', '、地点', '、价格', '、型号', '、', '供应商、', '级别、', '服务。\n', ' 3', '. ', '显式', '限制：', '用户直接', '提出的需求', '（', '可能', '清晰或', '模糊）', '或公司', '差旅', '政策（', '清晰）。\n', ' 4', '. ', '隐式', '限制：', '基于常识', '推理得出', '，', '如关键', '事件引发的', '限制', '（例如', '时间', '冲突）。\n', ' 5', '. ', '关键事件', '：影响', '订购', '的事件', '，分', '三类：', '交通行程', '、用户', '日程、', '时间缓冲', '。\n', ' 6', '. ', '默认规则', '：\n', '    ', ' - ', '市内交通', '用网', '约车', '。\n    ', ' - ', '差旅', '从常', '驻地开始', '并', '结束。\n', '     -', ' 每天', '从住宿', '酒店出发', '并返回', '。\n    ', ' - ', '默认时间', '缓冲：', '火车提前', '20分钟', '，飞机', '提前1', '小时。\n', ' 7', '. ', '显', '式限制', '的清晰', '度：', '定量清晰', '、定性', '清晰、', '模糊。\n', ' 8', '. ', '异常情况', '：', '缺、', '错、', '冲突/', '矛盾、', '工具问题', '。\n ', '9.', ' 需求', '分类：\n', '     -', ' 清晰', '需求：', '可直接转化为', '参数（', '如“', '车程', '20分钟内', '”）。\n', '     -', ' 模糊', '需求：', '说法', '不明确', '（如', '“附近', '”默认', '5', '公里内', '，“晚上', '”指', '18:', '00后', '）。\n    ', ' - ', '不完整', '需求：', '信息', '缺失（', '如“', '靠近客户的', '酒店”', '但未', '指明', '客户位置', '）。\n\n ', '目标', '是将', '以上', '内容浓缩', '成一段', '简洁', '的总结', '，保留', '所有关键', '点。\n', '</think>', '\n###', ' 差', '旅预订', '要素', '总结\n\n', '####', ' **1', '. ', '订购项目', '**  \n', '机票、', '酒店订单', '、火车', '票。\n\n', '#### **', '2.', ' 限制', '类型**', '  \n对', '订购项目的', '约束分类', '：  \n', '- **', '显', '式限制', '**：', '用户或', '公司政策', '直接提出的', '需求（', '可能', '清晰或', '模糊）。', '  \n-', ' **隐', '式限制', '**：', '基于常识', '推理的', '约束（', '如时间', '冲突）。', '  \n具体', '类型', '涵盖', '：  \n', '>', ' -', ' 时间', '、地点', '、价格', '  \n>', ' - ', '型号（', '机型/', '车型/', '房型', '）', '  \n>', ' - ', '供应商（', '航', '司/', '酒店品牌', '）  \n', '> -', ' 级别', '（舱', '位/', '坐席', '/星级', '）  \n', '> -', ' 服务', '（静', '音车厢', '/酒店', '设施）', '  \n\n####', ' **3', '. ', '关键事件', '**  \n', '影响行程', '的事件', '，隐含', '时间/', '地点限制', '：  \n', '>', ' - **', '交通行程', '**：', '航班、', '火车、', '网约', '车  \n', '> -', ' **用户', '日程**', '：会议', '、会谈', '等  \n', '> -', ' **时间', '缓冲**', '：车站', '提前', '20分钟', '、机场', '提前1', '小时  \n\n', '#### **', '4.', ' 默认', '规则**', '  \n-', ' ', '市内交通', '默认', '网', '约车', '。  \n', '- ', '差旅', '始终从', '常驻地', '出发并', '返回。', '  \n-', ' 每日', '行程以', '住宿酒店', '为起点', '/终点', '。  \n\n', '#### **', '5.', ' 需求', '清晰度', '**  \n', '- **', '清晰需求', '**（', '可直接', '参数', '化）：', '如"', '车程', '20', '分钟内"。', '  \n-', ' **', '模糊需求', '**（', '需默认', '方案', '）：  \n', '  >', ' - "', '附近"', '=5', '公里内', '、"晚上', '"=', '18:', '00后', '  \n ', ' > -', ' 如', '"酒店', '要好点', '"等', '主观', '表述', '。  \n', '- **', '不完整', '需求**', '：信息', '缺失（', '如"', '靠近客户的', '酒店"', '未', '指定', '客户位置', '）。  \n\n', '#### **', '6.', ' 异常', '情况**', '  \n包含', '：缺', '项', '、错误', '、冲突', '/', '矛盾、', '工具问题', '。  \n\n', '---', '  \n**', '核心', '逻辑**', '：关键', '事件（', '如会议', '）', '触发隐', '式限制', '，', '显', '式/', '隐式', '限制共同', '作用于订购', '项目，', '默认规则', '填补未', '指明', '细节', '。']
    )))